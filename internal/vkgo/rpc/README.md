# Документация пакета RPC

Этот пакет реализует VK RPC для TCP/Unix и UDP транспорта.

### Cвойства, которые есть сейчас

И которые нельзя терять при любых рефакторах пакета.

1. Строгость - всё, что отклоняется от протокола должна приводить к ошибке.
2. Скорость - обрабатывать 1млн RPS и более на среднем ноутбуке (2024г), и не хотим замедления.
3. Отсутствие аллокаций при длительной работе соединения, аллокации только при установлении.
4. Минимальные внешние и внутренние зависимости - из vkgo нельзя использовать ничего вне папки пакета.
5. Гарантия лимита памяти rpc.Server и backpressure на клиентов - при любых внешних условиях не будет выделено больше памяти и горутин-работников, чем настроено. Из этого свойства часто следуют гарантии лимита памяти и сервисов, построенных на базе rpc.Server. 
5. Тестируемость - максимальное использование библиотек детерминистского тестирования. 

### Свойства, которые хотелось бы реализовать

1. RPC level Congestion Control для rpc.Client - если клиент видит, что запрос вероятно не будет обработан сервером за таймаут, запрос должен генерировать ошибку локально. 
2. Лучшее инструментирование rpc.Server - писать события и различную информацию (например версию протокола) в Statshouse.

# Как использовать rpc.Server

## Инициализация

## Обработчик и контекст обработчика

## Цепочка обработчиков

## Поддержка Long poll

# Как использовать rpc.Client

## Инициализация

## Поддержка Long poll
