---
sidebar_position: 5
---

import Dash from '../img/dash.png'
import DashOpen from '../img/dash-open.png'
import DashList from '../img/dash-list.png'
import DashEdit from '../img/dash-edit.png'
import DashView from '../img/dash-view.png'
import DashName from '../img/dash-name.png'
import DashVar1 from '../img/dash-var-1.png'
import DashVar2 from '../img/dash-var-2.png'
import DashVar3 from '../img/dash-var-3.png'
import DashVar4 from '../img/dash-var-4.png'
import DashGroupByDefault from '../img/dash-group-by-default.png'
import DashAddVariables from '../img/dash-add-variables.png'
import DashLayout from '../img/dash-layout.png'
import DashRemove from '../img/dash-remove.png'
import PqlDash1 from '../img/pql-dash-1.png'
import PqlDash2 from '../img/pql-dash-2.png'
import PqlDash3 from '../img/pql-dash-3.png'
import PqlDash4 from '../img/pql-dash-4.png'
import MarkdownDashboard from '../img/markdown_dashboard.png'
import MarkdownDashboardEdit from '../img/markdown_dashboard_edit.png'
import FavoriteDashboards from '../img/favorite-dashboards.png'

# Как пользоваться дашбордами

Дашбоорд — это графический отчёт о данных, относящихся к конкретной системе (продукту или сервису):

<img src={Dash} width="900"/>

Следующие разделы помогут эффективно работать с дашбордами:
<!-- TOC -->
* [Поиск по дашбордам](#поиск-по-дашбордам)
* [Создание дашборда](#создание-дашборда)
* [Редактирование дашборда](#редактирование-дашборда)
  * [Настройки](#настройки)
    * [Информация о дашборде](#информация-о-дашборде)
    * [Переменные](#переменные)
  * [Расположение элементов](#расположение-элементов)
    * [Размер графика](#размер-графика)
    * [Группы графиков](#группы-графиков)
* [Просмотр дашборда](#просмотр-дашборда)
* [Удаление дашборда](#удаление-дашборда)
* [Настройка дашборда с использованием PromQL-графиков](#настройка-дашборда-с-использованием-promql-графиков)
<!-- TOC -->

## Поиск по дашбордам

Выберите нужный дашборд из списка:

<img src={DashList} width="700"/>

## Избранные дашборды

Чтобы поместить часто используемый дашборд в список избранного, нажмите на "звёздочку" рядом с названием дашборда:

<img src={FavoriteDashboards} width="400"/>

Метрики тоже можно [помещать в список избранного](./view-graph.md#избранные-метрики).

## Создание дашборда

StatsHouse автоматически помещает открытый график на дашборд.
Чтобы добавить график на этот дашборд, создайте новую [вкладку](view-graph.md#19--вкладки-метрик)
и выберите нужную метрику:

<img src={DashOpen} width="400"/>

Чтобы дашборд можно было найти в общем списке, [добавьте название и описание](#информация-о-дашборде).

## Редактирование дашборда

Чтобы отредактировать название, описание, расположение и размер элементов дашборда, нажмите кнопку-"шестерёнку".

<img src={DashEdit} width="800"/>

Обязательно сохраните изменения.

### Настройки

В разделе _Setting_ можно настроить основные параметры дашборда, например [общую информацию](#информация-о-дашборде) 
и [переменные](#переменные).

#### Информация о дашборде

В разделе _Setting_ можно указать название дашборда и добавить более подробное описание:

<img src={DashName} width="800"/>

В описаниях можно использовать [стандартную разметку Markdown](https://commonmark.org/help/).

<img src={MarkdownDashboardEdit} width="650"/>

Обратите внимание: форматирование отобразится только при наведении курсора на описание графика (в "тултипе" с
описанием).

<img src={MarkdownDashboard} width="650"/>

Чтобы завершить создание дашборда, нажмите кнопку _Create_. Кнопка активна только тогда, когда у дашборда есть название.

:::note
Обратите внимание: нельзя повторно использовать название [удалённого дашборда](#удаление-дашборда)
:::

#### Переменные

С помощью переменных можно фильтровать несколько графиков одновременно.
Переменная связывает теги метрик вместе, даже если наборы значений для тегов не пересекаются. 
Переменные также работают, если один и тот же тег в разных метриках называется по-разному, например `production` или 
`prod`.

Представьте: вам нужно просматривать две метрики на дашборде. У каждой метрики есть тег `environment`. Как связать эти 
теги вместе, чтобы фильтровать данные по обеим метрикам одновременно?

В первой метрике у тега `environment` два значения (`production`, `dev`):

<img src={DashVar1} width="900"/>

Во второй метрике у тега `environment` три значения (`production`, `staging`, `testing`):

<img src={DashVar2} width="900"/>

В разделе _Setting_ нажмите кнопку _Add variable_ (обязательно сохраните изменения, нажав кнопку _Save_):

<img src={DashAddVariables} width="800"/>

Привяжите теги `environment`, принадлежащие двум разным метрикам, к переменной `env` (обязательно нажмите кнопку 
_Apply_, чтобы применить изменения):

<img src={DashVar3} width="900"/>

В разделе _Layout_ появится переменная. Теперь можно фильтровать данные сразу двух метрик по тегу `environment`, 
используя объединённый список значений (`production`, `staging`, `testing`, `dev`):

<img src={DashVar4} width="900"/>

Если теги в разных метриках называются одинаково (как тег `environment` в нашем примере), можно использовать опцию 
_Autofilter_. Она автоматически создаст переменные для тегов с одинаковыми названиями.

### Расположение элементов

В разделе _Layout_ можно выбрать, как будут отфильтрованы, отсортированы и сгруппированы данные всех метрик на дашборде:

<img src={DashGroupByDefault} width="900"/>

Расположите графики на дашборде так, что удобнее было распознавать значимые паттерны в данных:

<img src={DashLayout} width="900"/>

#### Размер графика

_S_, _M_, _L_ — это фиксированные размеры графиков: маленький, средний и большой.
Вариант _autowidth_ позволяет заполнить графиками всю ширину экрана (для всей группы), а _per row_ — задать 
количество графиков в ряду (тоже для всей группы).

Расположите связанные по смыслу графики так, чтобы было удобно их сопоставлять: один над другим или рядом.

#### Группы графиков

Вы можете сгруппировать графики, добавить описания групп и расположить их так, чтобы было удобно:

* В режиме редактирования _Layout_ можно перетаскивать графики.
* Новую группу можно расположить выше или ниже текущей.
* Редко используемые группы можно свернуть для экономии ресурсов: свёрнутые графики не обновляются, когда вы 
  обновляете или открываете страницу.

## Просмотр дашборда

[Параметры просмотра и фильтрации](view-graph.md) для дашборда примерно такие же, как для отдельного графика. Если 
нужно, можно их сбросить и вернуться к сохранённому состоянию дашборда.

<img src={DashView} width="800"/>

## Удаление дашборда

Чтобы убрать неиспользуемые дашборды, перейдите в режим [редактирования дашборда](#редактирование-дашборда). В разделе 
_Setting_ нажмите кнопку _Remove_:

<img src={DashRemove} width="800"/>

:::note
Удалённый дашборд исчезнет из списка, но всё ещё будет существовать: название этого дашборда нельзя будет
использовать повторно.
:::

## Настройка дашборда с использованием PromQL-графиков

Чтобы фильтровать данные на дашборде, который содержит PromQL-графики, [создайте переменные](#переменные).

Представьте, что у вас есть PromQL-график с тегами:

<img src={PqlDash1} width="1000"/>

При создании [переменной](#переменные) для PromQL-графика (`new_var` в нашем примере) названия тегов отображаться не 
будут:

<img src={PqlDash2} width="1000"/>

Чтобы получить возможность фильтровать или группировать данные такого графика, перейдите в режим просмотра 
отдельного графика, включите редактор PromQL-запросов и нажмите _Run_:

<img src={PqlDash3} width="1000"/>

В нашем примере первоначальный запрос выглядел так:

`topk(5,metric{@what="countsec"})`

Мы связали тег `0` (он означает `environment`) с переменной `new_var`:

`topk(5,metric{@what="countsec",0:$new_var})`

В разделе _Layout_ при просмотре основной страницы _Dashboard_ появится фильтр-переменная. Чтобы отфильтровать 
данные по конкретному значению тега, введите его вручную:

<img src={PqlDash4} width="1000"/>

При добавлении следующих PromQL-графиков на дашборд убедитесь, что вы привязали нужные теги к соответствующим 
переменным для каждого графика.
