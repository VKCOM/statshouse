---
sidebar_position: 7
title: Управление бюджетом
---

import Namespace from '../img/namespace.png'
import NamespaceAdd from '../img/namespace-add.png'
import GroupName from '../img/group-name.png'
import GroupAdd from '../img/group-add.png'
import EditWeight1 from '../img/edit-weight-1.png'
import EditWeight2 from '../img/edit-weight-2.png'
import Weight from '../img/weight.png'

# Управление бюджетом

Вы можете устанавливать отдельные бюджеты для групп пользователей (тенантов) в соответствии с их потребностями.

StatsHouse обеспечивает справедливое распределение ресурсов между тенантами.
Если вам нужно управлять ресурсами вручную, вы можете изменить _вес_ для неймспейса (пространства имён), группы или
отдельной метрики.

## Неймспейсы (пространства имён)

Неймспейс (или пространство имён) — это именованный контейнер для метрик.
Неймспейсы помогают
* управлять бюджетами тенантов, меняя их [вес](#что-такое-вес),
* [управлять доступом](#управление-доступом-к-неймспейсу) к данным.

Принадлежность метрики к неймспейсу определяется по имени метрики.
Чтобы задать неймспейс, используйте двоеточие в имени метрики:

<img src={Namespace} width="400"/>

Неймспейсы не возникают сами по себе. Их создают администраторы StatsHouse.
При отправке данных используйте полное имя метрики, например `foo:bar`.

Метрика принадлежит к общему неймспейсу,
* если вы не указали неймспейс в имени метрики,
* если имя метрики содержит указание на несуществующий неймспейс.

Примеры:

| Если                                                               | То                                                                                               |
|--------------------------------------------------------------------|--------------------------------------------------------------------------------------------------|
| Администраторы создали для вас неймспейс `foo` .                   | Метрика `foo:bar` принадлежит неймспейсу `foo`.<br/>Метрика `abc` принадлежит общему неймспейсу. |
| В вашем кластере StatsHouse **нет** неймспейса с названием `buz` . | Метрика `buz:bar` принадлежит общему неймспейсу.                                                 |

Неймспейсы позволяют бюджетировать ресурсы кластера. Вы можете выделить дисковое пространство для своего 
неймспейса так, можно было отправлять не менее N байт в секунду и никто не мешал вашим данным. Такое 
бюджетирование может быть нужно, чтобы минимизировать семплирование.

Создать неймспейс можно в панели администратора (в левом меню StatsHouse):

<img src={NamespaceAdd} width="800"/>

По умолчанию ресурсы распределяются между неймспейсами справедливым образом. Чтобы выделить неймспейсу 
больше или меньше ресурсов, настройте параметр _Weight_ (_вес_).

### Что такое _вес_?

Вес — это доля ресурсов (в процентах), выделенных для тенанта. Тенант — это неймспейс, группа или метрика.

Настройка веса работает одинаково для неймспейсов, групп и отдельных метрик. Ниже показано, как изменить вес
для группы:

<img src={Weight} width="800"/>

:::important
Увеличивая вес (и бюджет) для одного тенанта, вы автоматически уменьшаете бюджет для других.
Это может привести к усилению [семплирования](../overview/concepts.md#семплирование) для них. См. рисунок выше.
:::

### Управление доступом к неймспейсу

К StatsHouse можно подключить систему управления доступом, чтобы контролировать использование отдельных неймспейсов.
Обычно у каждого крупного отдела в организации есть свой неймспейс.

## Группы

Группа — это префикс в имени метрики (его первая часть):

<img src={GroupName} width="400"/>

Группы могут принадлежать или не принадлежать неймспейсу.
Указывайте название группы (а также неймспейс, если он есть), когда создаёте метрику (даёте ей название) 
или отправляете данные.

Группы позволяют управлять бюджетами внутри неймспейсов. По умолчанию ресурсы распределяются
между группами справедливым образом. Чтобы выделить группе больше или меньше ресурсов, настройте параметр _Weight_ 
(_вес_).

<img src={GroupAdd} width="900"/>

## Настройка веса для отдельной метрики

Чтобы выделить больше или меньше ресурсов отдельным метрикам, измените их _вес_.

Перейдите в раздел **Edit** на странице метрики:

<img src={EditWeight1} width="700"/>

Прокрутите страницу вниз и настройте параметр **Weight** :

<img src={EditWeight2} width="700"/>

Эта настройка доступна только администраторам.
